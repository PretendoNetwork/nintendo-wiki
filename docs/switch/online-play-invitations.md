---
layout: post
toc: true
title: Online Play Invitations
---

URL: https://app.lp1.five.nintendo.net

This server manages online play invitations.

## Methods

| Method | URL                                                                  |
|--------|----------------------------------------------------------------------|
| PATCH  | `/v1/invitations`                                                    |
| POST   | `/v1/invitation_groups`                                              |
| GET    | `/v1/invitation_groups/<id>`                                         |
| GET    | [`/v1/users/<id>/invitations/inbox`](#get-v1usersidinvitationsinbox) |
| PATCH  | `/v1/users/<id>/invitations/mark_as_read`                            |

### GET /v1/users/&lt;id&gt;/invitations/inbox
This method returns incoming invitations. It takes two query parameters:

| Param  | Description                                                                                             |
|--------|---------------------------------------------------------------------------------------------------------|
| fields | Comma-separated list of fields that should be returned by the server                                    |
| read   | Specifies whether the server should return only unread invitation (`false`) or all invitations (`true`) |

The friends sysmodule currently either provides no parameters or `fields=count&read=false`.

Response on success:

| Field | Description                 |
|-------|-----------------------------|
| count | Total number of invitations |
| items | Invitation list             |

An invitation has the following fields:

| Field                | Description                                                                |
|----------------------|----------------------------------------------------------------------------|
| id                   | Invitation id generated by server (integer)                                |
| invitation_group_id  | Invitation group id generated by server (integer)                          |
| sender_id            | User id of sender (16 hex digits)                                          |
| application_id       | Title id from which the invitation was sent (16 hex digits)                |
| application_group_id | Presence group id for the current title (usually the same as the title id) |
| application_id_match | Unknown (always `false`)                                                   |
| application_data     | Game-specific information (base64)                                         |
| read                 | Whether the invitation is marked as read (boolean)                         |
| created_at           | Creation timestamp                                                         |
| updated_at           | Update timestamp                                                           |

## Errors
On error, the server sends the following response:

| Field | Description       |
|-------|-------------------|
| error | Error information |

The error information is encoded like this:

| Field   | Description                       |
|---------|-----------------------------------|
| code    | Error code (string with 4 digits) |
| message | Error message                     |

### Known Errors

| Code | Status | Message                        |
|------|--------|--------------------------------|
| 0001 | ?      | ?                              |
| 0002 | 400    | Invalid parameter.             |
| 0003 | 404    | Invalid request URI.           |
| 0004 | ?      | ?                              |
| 0005 | ?      | ?                              |
| 0006 | 401    | Unauthorized.                  |
| 0007 | ?      | ?                              |
| 0008 | ?      | ?                              |
| 0009 | ?      | ?                              |
| 0010 | 404    | Resource not found.            |
| 0011 | 400    | Application data is too large. |